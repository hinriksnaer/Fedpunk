# Autostart Applications
# Programs to run on Hyprland startup

# Essential services first
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = hyprpolkitagent
exec-once = dunst

# Wallpaper with fallbacks
# 1. Try current theme wallpaper
# 2. Fall back to default solid color if theme fails
exec-once = bash -c 'if [[ -f ~/.config/hypr/wallpapers/current ]]; then swaybg -i ~/.config/hypr/wallpapers/current -m fill; else fallback_wp=$(find ~/.local/share/fedpunk/themes/*/backgrounds -name "*.jpg" -o -name "*.png" | head -1 2>/dev/null); if [[ -f "$fallback_wp" ]]; then swaybg -i "$fallback_wp" -m fill; else swaybg -c "#1e1e1e"; fi; fi'

# Network management
exec-once = nm-applet

# Emergency terminal access (hidden by default, Super+Shift+Return to show)
# This provides a way to debug if the system becomes unresponsive
exec-once = [workspace special:emergency] kitty --title="Emergency Terminal"

# Initialize default theme if none exists, then apply theme
exec-once = sleep 2 && bash -c 'if [[ ! -f ~/.config/kitty/theme.conf ]]; then ~/.local/share/fedpunk/bin/fedpunk-theme-set catppuccin 2>/dev/null || ~/.local/share/fedpunk/bin/fedpunk-theme-set default 2>/dev/null || true; fi; ~/.local/share/fedpunk/bin/fedpunk-theme-refresh 2>/dev/null || true'
