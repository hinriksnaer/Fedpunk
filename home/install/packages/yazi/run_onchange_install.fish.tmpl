{{- if .install.yazi }}
#!/usr/bin/env fish
# Component: Yazi
# Description: Install yazi file manager
# Mode: {{ .mode.name }}

if not set -q FEDPUNK_INSTALL_YAZI; or test "$FEDPUNK_INSTALL_YAZI" != "true"
    exit 0
end

if not set -q FEDPUNK_PATH
    set -gx FEDPUNK_PATH "{{ .chezmoi.sourceDir }}"
end
source "{{ .chezmoi.workingTree }}/home/install/lib/helpers.fish"

section "Yazi Installation"

if command -v yazi >/dev/null 2>&1
    success "Yazi already installed"
else
    step "Installing Yazi dependencies" "sudo dnf install -qy gcc"
    step "Installing Yazi via cargo" "cargo install yazi-fm yazi-cli"
end

box "Yazi Installation Complete!" $GUM_SUCCESS
{{- end }}
