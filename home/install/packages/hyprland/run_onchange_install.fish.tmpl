{{- if and .install.hyprland (ne .mode.name "container") -}}
#!/usr/bin/env fish
# Install Hyprland Wayland compositor and dependencies


source "{{ .chezmoi.workingTree }}/home/install/lib/helpers.fish"

section "Hyprland Installation"

# Enable Hyprland COPR repository
subsection "Enabling Hyprland COPR repository"
if not sudo dnf copr list 2>/dev/null | grep -q "solopasha/hyprland"
    step "Enabling solopasha/hyprland COPR" "sudo dnf copr enable -y solopasha/hyprland"
else
    success "Hyprland COPR already enabled"
end

# Install core Hyprland packages
subsection "Installing Hyprland core packages"
install_packages hyprland hyprpaper waybar rofi-wayland mako grim slurp wl-clipboard xdg-desktop-portal-hyprland

# Install additional Wayland utilities (skip unavailable)
subsection "Installing Wayland utilities"
step "Installing optional utilities" "sudo dnf install -qy --skip-unavailable brightnessctl playerctl hyprpolkitagent wl-gammactl wlsunset"

# Install Qt Wayland support
subsection "Installing Qt Wayland support"
step "Installing Qt6 Wayland" "sudo dnf install -qy --skip-unavailable qt6-qtwayland"

echo ""
box "Hyprland Installed!

Hyprland compositor and all dependencies are ready.

Launch with: Hyprland

ðŸ’¡ Configuration: ~/.config/hypr/" $GUM_SUCCESS
{{- end }}
