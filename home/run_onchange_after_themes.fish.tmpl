#!/usr/bin/env fish
# Chezmoi run_onchange_after script: Theme refresh handler
# This runs AFTER chezmoi apply, and re-runs when theme files change

# Set up environment
set -x FEDPUNK_PATH "{{ .chezmoi.workingTree }}"
set -x FEDPUNK_MODE "{{ .mode.name }}"

echo ""
echo "Fedpunk Theme Watcher (Mode: {{ .mode.name }})"
echo "======================================================"
echo ""

# Check if we're in a desktop environment that needs theme refresh
{{- if eq .mode.name "desktop" }}
{{- else if eq .mode.name "laptop" }}
{{- else }}
echo "Container mode - no theme refresh needed"
{{- end }}

echo ""
echo "======================================================"
echo "Theme watch complete"
echo ""

# Theme file checksums (causes re-run when themes change)
{{- range (glob (printf "%s/themes/*" .chezmoi.workingTree)) }}
# {{ . | sha256sum }}
{{- end }}
