{{- $mode := "desktop" -}}

{{/* Auto-detect mode based on environment */}}
{{- if or (env "CONTAINER") (stat "/.dockerenv") (stat "/run/.containerenv") -}}
{{-   $mode = "container" -}}
{{- else if stat "/sys/class/power_supply/BAT0" -}}
{{-   $mode = "laptop" -}}
{{- else -}}
{{-   $mode = "desktop" -}}
{{- end -}}

{{/* Allow override via FEDPUNK_MODE environment variable */}}
{{- if env "FEDPUNK_MODE" -}}
{{-   $mode = env "FEDPUNK_MODE" -}}
{{- end -}}

[data]
  [data.mode]
    name = {{ $mode | quote }}

# Mode: {{ $mode }}
