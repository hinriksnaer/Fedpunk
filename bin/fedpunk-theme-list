#!/usr/bin/env fish
# List all available themes in the themes directory
# Usage: fedpunk-theme-list

# Find themes directory - works both before and after deployment
if set -q FEDPUNK_PATH
    set themes_dir "$FEDPUNK_PATH/themes"
else if test -d "$HOME/.local/share/fedpunk/themes"
    set themes_dir "$HOME/.local/share/fedpunk/themes"
else
    # Try to find relative to script location (for running from repo)
    set script_dir (dirname (status -f))
    set themes_dir (realpath "$script_dir/../themes")
end

# Check if themes directory exists
if not test -d "$themes_dir"
    echo "Error: Themes directory not found" >&2
    exit 1
end

# Get all theme directories
for theme_dir in $themes_dir/*/
    # Skip if not a directory
    test -d "$theme_dir"; or continue

    # Get basename and format nicely
    set theme_name (basename "$theme_dir")

    # Convert dashes to spaces and capitalize words
    echo $theme_name | sed 's/-/ /g; s/\b\(.\)/\u\1/g'
end | sort
