#!/usr/bin/env fish
# Fan Control plugin installation
# Creates symlinks for fan control utilities

set PLUGIN_DIR (dirname (status -f))
set BIN_DIR "$HOME/.local/bin"

# Ensure ~/.local/bin exists
mkdir -p "$BIN_DIR"

echo "Installing fan control utilities..."

# Create symlinks for each script
for script in fan-status fan-set fan-curve
    set source "$PLUGIN_DIR/$script"
    set target "$BIN_DIR/$script"

    # Remove existing symlink/file if it exists
    if test -e "$target" -o -L "$target"
        rm -f "$target"
    end

    # Create symlink
    ln -s "$source" "$target"

    if test $status -eq 0
        echo "  ✓ Installed $script"
    else
        echo "  ✗ Failed to install $script"
    end
end

echo "✓ Fan control utilities installed to ~/.local/bin/"
